--// Pet Inventory GUI Script (reads real pets from Backpack)

-- Remove old GUI
if game.CoreGui:FindFirstChild("PetInventoryGUI") then
    game.CoreGui.PetInventoryGUI:Destroy()
end

local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer

-- ScreenGui
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "PetInventoryGUI"
ScreenGui.Parent = game.CoreGui
ScreenGui.ResetOnSpawn = false

-- Main Frame
local MainFrame = Instance.new("Frame")
MainFrame.Parent = ScreenGui
MainFrame.AnchorPoint = Vector2.new(0.5,0.5)
MainFrame.Position = UDim2.new(0.5,0,0.5,0)
MainFrame.Size = UDim2.new(0,320,0,420)
MainFrame.BackgroundColor3 = Color3.fromRGB(30,30,30)
MainFrame.BorderSizePixel = 0
MainFrame.Active = true
MainFrame.Draggable = true
Instance.new("UICorner",MainFrame).CornerRadius = UDim.new(0,12)

-- Title
local Title = Instance.new("TextLabel")
Title.Parent = MainFrame
Title.Size = UDim2.new(1,0,0,40)
Title.BackgroundColor3 = Color3.fromRGB(45,45,45)
Title.TextColor3 = Color3.fromRGB(255,255,255)
Title.Font = Enum.Font.GothamBold
Title.TextSize = 18
Title.Text = "Tên Player: "..LocalPlayer.Name
Title.TextXAlignment = Enum.TextXAlignment.Left
Instance.new("UIPadding",Title).PaddingLeft = UDim.new(0,10)

-- Counter (x/60)
local Counter = Instance.new("TextLabel")
Counter.Parent = Title
Counter.Size = UDim2.new(0,80,1,0)
Counter.AnchorPoint = Vector2.new(1,0)
Counter.Position = UDim2.new(1,-5,0,0)
Counter.BackgroundTransparency = 1
Counter.TextColor3 = Color3.fromRGB(255,170,70)
Counter.Font = Enum.Font.GothamBold
Counter.TextSize = 16
Counter.Text = "0/60"

-- Search Bar
local SearchBox = Instance.new("TextBox")
SearchBox.Parent = MainFrame
SearchBox.PlaceholderText = "Tìm pet..."
SearchBox.Size = UDim2.new(1,-50,0,30)
SearchBox.Position = UDim2.new(0,10,0,50)
SearchBox.BackgroundColor3 = Color3.fromRGB(50,50,50)
SearchBox.TextColor3 = Color3.fromRGB(255,255,255)
SearchBox.PlaceholderColor3 = Color3.fromRGB(200,200,200)
SearchBox.Font = Enum.Font.Gotham
SearchBox.TextSize = 14
SearchBox.ClearTextOnFocus = false
Instance.new("UICorner",SearchBox).CornerRadius = UDim.new(0,6)

-- Refresh Button (small icon next to search box)
local RefreshButton = Instance.new("TextButton")
RefreshButton.Parent = MainFrame
RefreshButton.Size = UDim2.new(0,30,0,30)
RefreshButton.Position = UDim2.new(1,-40,0,50)
RefreshButton.BackgroundColor3 = Color3.fromRGB(255,170,70)
RefreshButton.TextColor3 = Color3.fromRGB(0,0,0)
RefreshButton.Font = Enum.Font.GothamBold
RefreshButton.TextSize = 18
RefreshButton.Text = "⟳"
Instance.new("UICorner", RefreshButton).CornerRadius = UDim.new(0,6)

RefreshButton.MouseButton1Click:Connect(function()
    UpdatePets(SearchBox.Text)
end)

-- Scrolling frame
local Scroller = Instance.new("ScrollingFrame")
Scroller.Parent = MainFrame
Scroller.Size = UDim2.new(1,-20,1,-100)
Scroller.Position = UDim2.new(0,10,0,90)
Scroller.CanvasSize = UDim2.new(0,0,0,0)
Scroller.BackgroundTransparency = 1
Scroller.ScrollBarThickness = 6
Scroller.AutomaticCanvasSize = Enum.AutomaticSize.Y

local UIList = Instance.new("UIListLayout",Scroller)
UIList.Padding = UDim.new(0,5)
UIList.SortOrder = Enum.SortOrder.LayoutOrder

-- Function to get all Backpack pets
local function GetPets()
    local pets = {}
    for _,tool in ipairs(LocalPlayer.Backpack:GetChildren()) do
        if tool:IsA("Tool") and tool:GetAttribute("ItemType") == "Pet" then
            local pet = {
                Name = tool.Name,
                Weight = tostring(math.random(3,10)).." KG", -- fake weight (unless attribute exists)
                Age = tool:GetAttribute("Age"),
                Color = Color3.fromRGB(math.random(80,255),math.random(80,255),math.random(80,255))
            }
            table.insert(pets, pet)
        end
    end
    return pets
end

-- Render pets
local function UpdatePets(filter)
    for _,child in ipairs(Scroller:GetChildren()) do
        if child:IsA("Frame") then child:Destroy() end
    end

    local pets = GetPets()  
    local count = 0  
    for _,pet in ipairs(pets) do  
        if not filter or filter == "" or string.find(string.lower(pet.Name), string.lower(filter)) then  
            count += 1  

            local Row = Instance.new("Frame")  
            Row.Size = UDim2.new(1,0,0,30)  
            Row.BackgroundColor3 = Color3.fromRGB(40,40,40)  
            Row.Parent = Scroller  
            Instance.new("UICorner",Row).CornerRadius = UDim.new(0,6)  

            local Dot = Instance.new("Frame")  
            Dot.Parent = Row  
            Dot.Size = UDim2.new(0,12,0,12)  
            Dot.Position = UDim2.new(0,8,0.5,-6)  
            Dot.BackgroundColor3 = pet.Color  
            Dot.BorderSizePixel = 0  
            Instance.new("UICorner",Dot).CornerRadius = UDim.new(1,0)  

            local Label = Instance.new("TextLabel")  
            Label.Parent = Row  
            Label.BackgroundTransparency = 1  
            Label.Size = UDim2.new(1,-30,1,0)  
            Label.Position = UDim2.new(0,25,0,0)  
            Label.Font = Enum.Font.Gotham  
            Label.TextSize = 14  
            Label.TextXAlignment = Enum.TextXAlignment.Left  
            Label.TextColor3 = Color3.fromRGB(255,255,255)  

            local text = pet.Name.." ["..pet.Weight.."]"  
            if pet.Age then  
                text = text.." [Age "..pet.Age.."]"  
            end  
            Label.Text = text  
        end  
    end  
    Counter.Text = tostring(count).."/60"
end

-- Events
SearchBox:GetPropertyChangedSignal("Text"):Connect(function()
    UpdatePets(SearchBox.Text)
end)

LocalPlayer.Backpack.ChildAdded:Connect(function()
    task.wait(0.1)
    UpdatePets(SearchBox.Text)
end)
LocalPlayer.Backpack.ChildRemoved:Connect(function()
    task.wait(0.1)
    UpdatePets(SearchBox.Text)
end)

-- First render
UpdatePets()
